mutation buyProduct($productId:String!,$customerId:EmailAddressScalar!)  {
  buy(productId:$productId,customerId:$customerId){
    ...buyProductView
  }
}

fragment buyProductView on Product{
    id
    inStock
    actionsAllowed
    name
    inTransit: productsInTransit(customerId:$customerId){
        ...productsInTransit
    }
}

fragment productsInTransit on ProductInTransit {
      id
      productId
      state
}